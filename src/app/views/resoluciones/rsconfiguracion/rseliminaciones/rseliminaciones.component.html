<ngx-ui-loader [loaderId]="'loader-eliminar'"></ngx-ui-loader>


  <div class="row justify-content-center" style="padding: 0px; margin: 0px;">
    <div class="col-lg-12 col-md-12">
      <!-- Search Card -->
      <div class="card shadow-sm border-0 mb-5" style="border-radius: 1rem; overflow: hidden;">
        <div class="card-body p-5">
          <div class="text-center mb-5">
            <div class="icon icon-shape btn-pastel-cancel text-white rounded-circle shadow-lg mb-4" style="width: 80px; height: 80px;">
              <mat-icon style="font-size: 50px; width: 50px; height: 50px; margin-top: 30px;">delete_forever</mat-icon>
            </div>
            <h4 class="text-uppercase text-muted ls-1 mb-1 font-weight-bold">Gestión de Eliminaciones</h4>
            <h2 class="mb-2 text-dark font-weight-bold">Buscar Resolución</h2>
            <p class="text-muted mx-auto" style="max-width: 600px;">
              Ingrese el número de resolución para consultar su estado y gestionar la eliminación de registros del sistema. 
              <br><small class="text-danger font-weight-bold"><i class="fa fa-exclamation-triangle mr-1"></i> Zona de Peligro</small>
            </p>
          </div>

          <div class="form-row justify-content-center align-items-end">
            <div class="form-group col-md-7">
              <label class="form-label-custom text-muted">Número de Resolución</label>
              <div class="input-group shadow-sm">
                <div class="input-group-prepend">
                  <span class="input-group-text icon-box bg-white border-right-0">
                    <mat-icon class="input-icon text-danger">tag</mat-icon>
                  </span>
                </div>
                <input type="text" class="input-custom form-control border-left-0 pl-2" placeholder="Ej: 012345"
                  [ngModelOptions]="{standalone: true}" [(ngModel)]="numero"
                  (keypress)="consultarResolucion($event)" style="height: 50px; font-size: 1.1rem;">
              </div>
            </div>
            <div class="form-group col-md-3">
              <button class="btn btn-pastel text-white w-100 shadow-sm" style="height: 50px;" (click)="consultarResolucion(undefined)">
                <span class="d-flex align-items-center justify-content-center font-weight-bold">
                  <span class="fa fa-search"></span>&nbsp;&nbsp;Consultar
                </span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Results Section -->
      <div *ngFor="let e of lstResoluciones" class="card shadow border-0 mb-4 shadow-lg--hover" style="border-radius: 1rem; transition: transform 0.3s;">
        <div class="card-body p-4">
          <div class="row align-items-start">
            <div class="col-md-2 text-center pt-2">
               <div class="icon icon-shape bg-secondary text-warning rounded-circle shadow mb-3">
                  <mat-icon style="font-size: 28px; width: 28px; height: 28px;">warning_amber</mat-icon>
               </div>
            </div>
            <div class="col-md-10">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="mb-0 text-primary font-weight-bold">Resolución N° {{ e.numero_resol }}</h3>
                <span class="badge badge-pill badge-danger text-white px-3 py-2">Acción Crítica</span>
              </div>
              
              <div class="alert alert-secondary shadow-sm border-0 mb-4" role="alert" style="border-left: 4px solid #fb6340;">
                <div class="row">
                  <div class="col-md-12">
                    <h5 class="alert-heading font-weight-bold text-default mb-2">Resumen de Registros</h5>
                    <p class="mb-0 text-sm text-muted">
                      Actualmente esta resolución posee <span class="badge badge-primary badge-circle badge-lg mx-1">{{ e.cantidad }}</span> registros en el sistema.
                      <br>Para borrar estos registros debe contar con la autorización correspondiente.
                    </p>
                  </div>
                </div>
              </div>
              
              <div class="alert alert-danger shadow-sm border-0 mb-4" role="alert">
                 <div class="d-flex align-items-center">
                   <mat-icon class="mr-3 text-white">report_problem</mat-icon>
                   <div>
                     <span class="font-weight-bold text-uppercase">Nota Importante:</span>
                     <span class="d-block text-sm mt-1">Recuerde tener presente que esta acción elimina del sistema <strong>COMPLETAMENTE</strong> la resolución. Esta acción no se puede deshacer.</span>
                   </div>
                 </div>
              </div>

              <div class="text-right">
                <button class="btn btn-pastel-cancel text-white" (click)="eliminar(e.fecha_resol)">
                  <span class="fa fa-trash"></span>&nbsp;&nbsp; Eliminar Registros ({{e.fecha_resol}})
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>