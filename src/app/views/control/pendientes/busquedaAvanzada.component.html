<div class="form-row">
    <div class="form-group col-md-11" style="margin-bottom: 1px;">
        <h1 mat-dialog-title>Busqueda Avanzada</h1>
    </div>
    <div class="form-group col-md-1" style="margin-bottom: 1px;">
        <button mat-icon-button
            style="outline: none !important; box-shadow: none !important; background-color: transparent !important;"
            (click)="cerrarDialogo()">
            <mat-icon aria-label="Cerrar diálogo">close</mat-icon>
        </button>
    </div>
</div>

<div mat-dialog-content style="height: 300px; max-height: none; overflow: hidden;">
    <div class="form-row">
        <div class="form-group col-md-6" style="text-align: center; padding-top: 12px; color: gray;"
            *ngIf="mostrarCamposAdicionales">
            <div style="display: inline-block;">
                <label>
                    <input type="radio" [(ngModel)]="Doc.privacidad" value="0">
                    PÚBLICO
                </label>
            </div>
            <div style="display: inline-block;">
                <label style="padding-left:50px">
                    <input type="radio" [(ngModel)]="Doc.privacidad" value="1">
                    CONFIDENCIAL
                </label>
            </div>
        </div>
        <div class="form-group col-md-3">
            <!-- <label for="cmbTipoDocumento">Tipo de Documento</label> -->
            <select class="form-control" [ngModelOptions]="{standalone: true}" [disabled]="activarTipo"
                [(ngModel)]="Doc.tipo" value="{{Doc.tipo}}" (change)="selTipoDocumento()" id="tdoc">
                <option value="0">Tipo de Documento</option>
                <option *ngFor="let x of lstT" value="{{x.nomb}}">{{ x.nomb }} </option>
            </select>
        </div>
        <div class="form-group col-md-3">
            <!-- <label for="cmbRemitente">{{remitentet}}</label> -->
            <select class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="Doc.remitente"
                value="{{Doc.remitente}}" id="remi">
                <option value="0">Remitente</option>
                <option *ngFor="let x of lstR" value="{{x.nomb}}">{{ x.nomb }}</option>
            </select>
        </div>
        <div class="form-group col-md-3">
            <!-- <label for="cmbUnidad">Unidad o Dependencia</label> -->
            <select class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="Doc.unidad"
                value="{{Doc.unidad}}" id="unid">
                <option value="0">Unidad o Dependencia</option>
                <option *ngFor="let x of lstU" value="{{x.nomb}}">{{ x.nomb }} </option>
            </select>
        </div>
        <div class="form-group col-md-3">
            <!-- <label>Componente / Gran Comando</label> -->
            <div class="input-group">
                <select class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="Doc.comando"
                    value="{{Doc.comando}}" id="coma">
                    <option value="0">Componente / Gran Comando</option>
                    <option *ngFor="let x of lstC" value="{{x.nomb}}">{{ x.nomb }}</option>
                </select>
                <div class="input-group-append" *ngIf="booDependencia">
                    <button *ngIf="!editar" type="button" (click)="agregarDependencia()" id="btndependencia"
                        class="btn btn-success">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </div>
        <div class="form-group col-md-6" style="text-align: center; padding-top: 0; color: gray;"
            *ngIf="mostrarCamposAdicionales">
            <div class="form-group col-md-13" style="padding-top:0px;margin-bottom: 0px;">
                <!-- <label for="">Expediente</label> -->
                <input type="text" class="form-control" placeholder="Expediente" [ngModelOptions]="{standalone: true}"
                    *ngIf="mostrarCamposAdicionales" [(ngModel)]="Doc.nexpediente" value="{{ Doc.nexpediente }}">
            </div>
        </div>
    </div>

    <div class="row">

        <div class="form-group col-md-4">
            <div class="NgxEditor__Wrapper">
                <angular-editor [placeholder]="'Contenido del oficio'" *ngIf="mostrarCamposAdicionales"
                    [config]="editorConfig" [(ngModel)]="Doc.contenido"></angular-editor>
            </div>
        </div>
        <div class="form-group col-md-4">
            <div class="NgxEditor__Wrapper">
                <angular-editor [placeholder]="'Instrucciones Generales'" *ngIf="mostrarCamposAdicionales"
                    [config]="editorConfig" [(ngModel)]="Doc.instrucciones"></angular-editor>
            </div>
        </div>
        <div class="form-group col-md-4">
            <textarea class="form-control" placeholder="Lista de Asociación" *ngIf="mostrarCamposAdicionales"
                style="height: 85px;" [(ngModel)]="nasociacion"></textarea>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="form-row d-md-flex justify-content-end" >

                <div class="form-group col-md-2">
                    <div class="form-group">

                        <div class="input-group" style="width:100%; padding-top: 15px;">
                            <button class="btn btn-light " style="width: 100%;" (click)="activarCamposAdicionales()"> 
                                {{ mostrarBotonOcultar ? 'Ocultar' : 'Ver más' }}
                                <!-- <i class="fa fa-search" aria-hidden="true"></i> -->
                            </button>
                        </div>
                    </div>
                </div>

                <div class="form-group col-md-2">
                    <div class="form-group">
                        <div class="input-group" style="width:100%; padding-top: 15px;">
                            <button class="btn bg-primary text-white" id="registrar" style="width: 100%;">
                                Buscar
                                <i class="fa fa-search" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="container">
                    <br>
                    <small class="mr-5" style="font-size: 16px;" *ngIf="blBuscar">
                        Cerca de {{ cantidad | number }} resultados...
                    </small>
                    <br>
                    <div class="row enlace" *ngFor="let e of bzSeguimiento; let i=index ">

                        <div class="col-md-8">
                            <a routerLinkActive="active" [routerLink]="['/constancia', constancia( e.numc )]">
                                {{ e.numc }} - {{ e.tdoc }}
                            </a>
                            | {{ e.origen | date:"dd-MM-yyyy" }}
                        </div>
                        <div class="col-md-4 text-right">

                            <span class="badge rounded-pill text-bg-primary">pdf</span>

                            <a [href]="dwUrl(e.numc, e.archivo)" target="_top" rel="noopener noreferrer"
                                style="color:darkgrey;font-size: 12px;font-weight: normal;">

                                {{ e.archivo.substring(0,10) }}
                                <img src="./assets/img/theme/pdf2.jpeg" alt="Descargar archivo"
                                    style="width: 12px;margin-top: -3px;" />
                            </a>
                        </div>

                        <div class="col-md-12" style="margin-top: -4px;">
                            <ng-template #popContent>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div [innerHTML]="e.contenido" class="contenido"></div>
                                    </div>
                                </div>
                            </ng-template>
                            {{ e.unidad }}
                            <button mat-button [ngbPopover]="popContent" popoverTitle="Detalles generales">
                                Mas...
                            </button>
                            <div [innerHTML]="e.resumenl" class="contenido"></div>

                            <p style="margin-top: -10px;">
                                <small class=" mr-3"><i class="fa fa-calendar"></i>&nbsp;{{ e.fecha
                                    |
                                    date:"dd-MM-yyyy hh:mm"
                                    }}</small>
                                <small class=" mr-3"><i class="fa fa-map-pin"></i> &nbsp; ORIGEN {{
                                    e.norigen | uppercase
                                    }}</small>
                                <small class=" mr-3"><i class="fa fa-folder"></i> &nbsp; SALIDA {{
                                    e.salida | uppercase
                                    }}</small>

                                <small class=" mr-4"><i class="fa fa-globe"></i> &nbsp;
                                    {{ e.nombre | uppercase }} ( {{ e.estatus_nombre | uppercase }}
                                    {{
                                    e.s_texto }} )
                                </small>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br><br>

        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6 text-center">
                <nav aria-label="Page navigation example" *ngIf="blBuscar">
                    <div class="row">
                        <div class="col-md-1">
                            <ul class="pagination justify-content-center">
                                <li class="page-item">
                                    <a class="page-link" *ngIf="antes" (click)="posicion(actual-1)"></a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-10">
                            <ul class="pagination justify-content-center">
                                <li class="page-item" *ngFor="let e of lstPaginas">
                                    <a class="page-link {{ e.color }}" (click)="posicion(e.id)">{{
                                        e.id
                                        }}</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-1">
                            <ul class="pagination justify-content-center">
                                <li class="page-item">
                                    <a class="page-link" *ngIf="despues" (click)="posicion(actual+1)">></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
            <div class="col-md-3"></div>
        </div>
    </div>
</div>