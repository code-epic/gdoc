<div class="header bg-pastel-gradient pb-8 pt-5 pt-md-8">
    <div class="container-fluid">
        <p></p>
    </div>
</div>

<div class="container-fluid mt--9">
    <div class="row">
        <div class="col-xl-12 col-md-12 col-lg-12">
            <div class="card shadow">
                <div class="card-header bg-transparent">
                    <div class="row align-items-center" style="margin: -10px;">
                        <div class="col-md-3">
                            <h6 class="text-uppercase text-muted ls-1 mb-1">Resoluciones</h6>
                            <h2 class="mb-0">Modulo de Busqueda</h2>
                        </div>
                        <div class="col-md-7">
                            <div class="div-radio-avanzado">
                                <mat-radio-group class="mat-radio" [(ngModel)]="opttodos"  color="primary">
                                    <mat-radio-button value="0"> RESOLUCIONES
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </mat-radio-button>
                                    <mat-radio-button value="1"> ENTRADA </mat-radio-button>
                                </mat-radio-group>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <div class="media align-items-center">
                                <div class="example-button-row">
                                    <button mat-icon-button title="Volver Atrás" [routerLink]="['/resoluciones']">
                                        <mat-icon>arrow_back</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <ul class="navbar-nav align-items-right d-none d-md-flex">
                                <li class="nav-item" ngbDropdown placement="bottom-right">
                                    <a class="nav-link pr-0" role="button" ngbDropdownToggle>
                                        <div class="media align-items-center">
                                            <div class="example-button-row">
                                                <button mat-icon-button aria-label="">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                            </div>
                                        </div>
                                    </a>
                                    <div class="dropdown-menu-arrow dropdown-menu-right" ngbDropdownMenu>
                                     
                                        <a routerLinkActive="active" [routerLink]="['/rsconfiguracion']"
                                            class="dropdown-item">
                                            <i class="fa fa-cogs"></i>
                                            <span>Configuraciones</span>
                                        </a>

                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>


                <div class="card-body">
                    <div class="row" *ngIf="opttodos=='0'">

                        <div class="col-md-12">
                            <app-rsentradas *ngIf="valEditEntrada" [entradas]="input_entrada"></app-rsentradas>
                        </div>

                        <div class="col-md-12">
                            <app-eresoluciones *ngIf="valEditResolucion"
                                [resolucion]="input_resoluciones"></app-eresoluciones>
                        </div>

                        <div class="col-md-12" *ngIf="!valEdit">
                            <ngx-ui-loader [loaderId]="'loader-buscar'"></ngx-ui-loader>
                            <mat-tab-group mat-stretch-tabs class="example-stretched-tabs"
                                [selectedIndex]="selected.value" (selectedIndexChange)="selected.setValue($event)">
                                <mat-tab *ngIf="bEspecifica">
                                    <ng-template mat-tab-label>
                                        &nbsp;ESPECIFICA
                                    </ng-template>
                                    <br>
                                    <a href="#control" id="control" name="control"></a>
                                    <div *ngIf="blEditor" class="example-large-box " style="margin: 0px;padding: 15px;">
                                        <app-rscdatosbasicos EDITOR="{{EDITOR}}"></app-rscdatosbasicos>
                                    </div>
                                    <div *ngIf="blEspecifico" class="example-large-box "
                                        style="margin: 0px;padding: 15px;">



                                        <div class="form-row">

                                            <div class="form-group col-md-4">
                                                
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text icon-box">
                                                            <mat-icon class="input-icon">badge</mat-icon>
                                                        </span>
                                                    </div>
                                                    <input type="text" class="input-custom" placeholder="Nombre completo"
                                                        [ngModelOptions]="{standalone: true}" [(ngModel)]="nombre"
                                                        (keypress)="consultarNombre($event);">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text icon-box">
                                                            <mat-icon class="input-icon">security</mat-icon>
                                                        </span>
                                                    </div>
                                                    <select class="input-custom" [ngModelOptions]="{standalone: true}"
                                                        [(ngModel)]="dbcomponente">
                                                        <option value="%">COMPONENTE</option>
                                                        <option *ngFor="let e of Componentes;" [value]="e.cod_componente">{{e.nombre_componente}}</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group col-md-3">
                                                
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text icon-box">
                                                            <mat-icon class="input-icon">military_tech</mat-icon>
                                                        </span>
                                                    </div>
                                                    <select class="input-custom" [ngModelOptions]="{standalone: true}" [(ngModel)]="dbgrado">
                                                        <option value="%">GRADOS</option>
                                                        <option *ngFor="let e of Grados" value="{{e.cod_grado}}">{{e.nombre_corto }} - {{e.nombres_grado }}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group col-md-2">
                                                
                                                <button class="btn btn-pastel text-white w-100" (click)="verificarNombre()">
                                                    <span class="d-flex align-items-center justify-content-center">
                                                        <span class="fa fa-search" style="font-size: 18px;"></span>&nbsp;&nbsp;Consultar
                                                    </span>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="form-row">

                                            <div class="form-group col-md-3">
                                                
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text icon-box">
                                                            <mat-icon class="input-icon">fingerprint</mat-icon>
                                                        </span>
                                                    </div>
                                                    <input type="text" class="input-custom" placeholder="Cédula"
                                                        [ngModelOptions]="{standalone: true}" [(ngModel)]="cedula"
                                                        (keypress)="consultarCedula($event)">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text icon-box">
                                                            <mat-icon class="input-icon">tag</mat-icon>
                                                        </span>
                                                    </div>
                                                    <input type="text" class="input-custom" placeholder="Numero de resuelto"
                                                        [ngModelOptions]="{standalone: true}"
                                                        [(ngModel)]="IResolucion.numero" value="{{IResolucion.numero}}"
                                                        (keypress)="consultarResolucion($event)">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text icon-box">
                                                            <mat-icon class="input-icon">description</mat-icon>
                                                        </span>
                                                    </div>
                                                    <input type="text" class="input-custom" placeholder="Numero de Orden General">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <button class="btn btn-pastel text-white w-100" (click)="verificar()">
                                                    <span class="d-flex align-items-center justify-content-center">
                                                        <span class="fa fa-user" style="font-size: 18px;"></span>&nbsp;&nbsp;Consultar por caso
                                                    </span>
                                                </button>
                                            </div>

                                        </div>

                                        <div class="row align-items-center py-2 bg-white" *ngIf="dbDatos">
                                            <div class="col-md-9">
                                                <h2 *ngIf="blDatosBasicos" class="title-elegant mb-0">Datos Básicos</h2>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="d-flex justify-content-end">
                                                    <button *ngIf="blResolucionPanel" mat-icon-button class="ml-2 shadow-sm btn-pastel text-white"
                                                        title="Volver Atrás" (click)="volverResolucion()">
                                                        <mat-icon>open_in_browser</mat-icon>
                                                    </button>
                                                    
                                                    <button *ngIf="blDatosBasicos" mat-icon-button class="ml-2 shadow-sm btn-pastel text-white"
                                                        title="Editar datos Basicos" (click)="editarDatosBasicos()">
                                                        <mat-icon>manage_accounts</mat-icon>
                                                    </button>

                                                    <button *ngIf="blAlertas" mat-icon-button class="ml-2 shadow-sm btn-pastel text-white"
                                                        title="Ir a Alertas" (click)="irAlertas()">
                                                        <mat-icon>notifications</mat-icon>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="row" *ngIf="dbDatos">

                                            <div class="col-md-12">
                                                <div class="card border-0 shadow-sm b-4" style="border-radius: 2px; overflow: hidden;">
                                                    <div class="card-body p-0">
                                                        <div class="row no-gutters">
                                                            <!-- Left Column: Profile & Personal Data -->
                                                            <div class="col-lg-3 bg-secondary p-4 border-right d-flex flex-column align-items-center">
                                                                
                                                                <!-- Photo with elegant frame and maximize action -->
                                                                <div class="position-relative mb-3" style="cursor: pointer;" (click)="detalleFoto(fotoModal, IDatosBasicos)">
                                                                    <div class="shadow-lg p-1 bg-white rounded">
                                                                        <img [src]="obtenerFoto(IDatosBasicos.cedula)" class="rounded" 
                                                                             style="width: 100%; max-width: 220px; height: auto; object-fit: cover;" 
                                                                             alt="Foto del perfil">
                                                                    </div>
                                                                    <div class="position-absolute rounded d-flex align-items-center justify-content-center" 
                                                                         style="top: 0; left: 0; width: 100%; height: 100%; background: rgba(94, 170, 168, 0.6); opacity: 0; transition: opacity 0.3s;"
                                                                         onmouseover="this.style.opacity=1" onmouseout="this.style.opacity=0">
                                                                        <mat-icon class="text-white" style="font-size: 36px; width: 36px; height: 36px;">zoom_in</mat-icon>
                                                                    </div>
                                                                </div>
                                            
                                                                <h4 class="text-center font-weight-bold text-dark mb-1 text-uppercase">{{IDatosBasicos.nombres || 'NO APLICA'}}</h4>
                                                                <div class="mb-3">
                                                                    <span class="badge badge-pill badge-primary shadow-sm px-3 py-2" 
                                                                          [ngStyle]="{'background-color': color_acc ? color_acc : '#5eaaa8', 'color': color_texto}"
                                                                          style="font-size: 13px;"
                                                                          >
                                                                        V-{{IDatosBasicos.cedula || 'NO APLICA'}}
                                                                    </span>
                                                                </div>
                                            
                                                                <!-- Personal Details List -->
                                                                <div class="w-100 px-2">
                                                                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                                                        <span class="text-muted text-xs font-weight-bold text-uppercase">Sexo</span>
                                                                        <span class="font-weight-600 text-dark text-sm">{{ (getSex(IDatosBasicos.sexo) | uppercase) || 'NO APLICA' }}</span>
                                                                    </div>
                                                                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                                                        <span class="text-muted text-xs font-weight-bold text-uppercase">Situación</span>
                                                                        <span class="font-weight-600 text-dark text-sm">{{ (getSituation(IDatosBasicos.situacion) | uppercase) || 'NO APLICA' }}</span>
                                                                    </div>
                                                                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                                                        <span class="text-muted text-xs font-weight-bold text-uppercase">Clasificación</span>
                                                                        <span class="font-weight-600 text-dark text-sm">{{ (IDatosBasicos.clasificacion | uppercase) || 'NO APLICA' }}</span>
                                                                    </div>
                                                                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                                                        <span class="text-muted text-xs font-weight-bold text-uppercase">Categoría</span>
                                                                        <span class="font-weight-600 text-dark text-sm">{{ IDatosBasicos.categoria || 'NO APLICA' }}</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                            
                                                            <!-- Right Column: Professional Info & Timeline -->
                                                            <div class="col-lg-9 p-4 bg-white">
                                                                <!-- Header -->
                                                                <div class="d-flex align-items-center mb-3 pb-2 border-bottom">
                                                                    <div class="icon icon-shape btn-pastel text-white rounded-circle shadow mr-3">
                                                                        <mat-icon>military_tech</mat-icon>
                                                                    </div>
                                                                    <div>
                                                                        <h5 class="text-uppercase text-muted ls-1 mb-0">Información Profesional</h5>
                                                                        <h2 class="text-dark mb-0">{{IDatosBasicos.grado || 'NO APLICA'}} - {{IDatosBasicos.componente || 'NO APLICA'}}</h2>
                                                                    </div>
                                                                </div>
                                            
                                                                <!-- Details Cards -->
                                                                <div class="row mb-3">
                                                                    <div class="col-md-6 mb-2 mb-md-0">
                                                                        <div class="p-3 rounded" style="background-color: #f8f9fe; border-left: 4px solid #5e72e4;">
                                                                            <small class="text-muted text-uppercase font-weight-bold d-block mb-1" style="font-size: 0.7rem;">Especialidad</small>
                                                                            <span class="h5 font-weight-bold mb-0 text-dark" style="font-size: 0.9rem;">{{ (IDatosBasicos.especialidad | uppercase) || 'NO APLICA' }}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6">
                                                                        <div class="p-3 rounded" style="background-color: #f8f9fe; border-left: 4px solid #11cdef;">
                                                                            <small class="text-muted text-uppercase font-weight-bold d-block mb-1" style="font-size: 0.7rem;">Fecha de Promoción</small>
                                                                            <span class="h5 font-weight-bold mb-0 text-dark" style="font-size: 0.9rem;">{{ convertirFecha(IDatosBasicos.promocion) || 'NO APLICA' }}</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                            
                                                                <!-- Alerts/Observations -->
                                                                <div class="mb-3" *ngIf="IDatosBasicos.observaciones || IDatosBasicos.condicion != 0">
                                                                    <div class="alert alert-secondary shadow-sm border-0 mb-2" *ngIf="IDatosBasicos.observaciones">
                                                                        <div class="d-flex align-items-center">
                                                                            <mat-icon class="mr-2 text-muted" style="font-size: 18px; width: 18px; height: 18px;">info</mat-icon>
                                                                            <span class="text-sm text-dark" style="font-size: 0.85rem;"><strong>OBSERVACIONES:</strong> {{ (IDatosBasicos.observaciones | uppercase) || 'NO APLICA' }}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="alert shadow-sm border-0 mb-0" [ngClass]="{'alert-danger': IDatosBasicos.condicion == 3, 'alert-warning': IDatosBasicos.condicion == 2, 'alert-info': IDatosBasicos.condicion == 1}" *ngIf="IDatosBasicos.condicion != 0">
                                                                        <div class="d-flex align-items-center">
                                                                            <mat-icon class="mr-2" [ngClass]="{'text-white': IDatosBasicos.condicion == 3, 'text-dark': IDatosBasicos.condicion != 3}" style="font-size: 18px; width: 18px; height: 18px;">warning</mat-icon>
                                                                            <span class="text-sm" [ngClass]="{'text-white': IDatosBasicos.condicion == 3, 'text-dark': IDatosBasicos.condicion != 3}"><strong>MOTIVO:</strong> {{ (IDatosBasicos.motivo | uppercase) || 'NO APLICA' }}</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                            
                                                                <!-- Timeline Section -->
                                                                <div class="mt-4">
                                                                    <div class="d-flex align-items-center mb-3">
                                                                        <h5 class="text-uppercase text-muted ls-1 mb-0" style="font-size: 0.8rem; font-weight: 700; letter-spacing: 1px;">
                                                                            Historial de Ascensos
                                                                        </h5>
                                                                    </div>
                                                                    
                                                                    <div class="timeline-container pl-1 pr-2" style="max-height: 500px; overflow-y: auto; overflow-x: hidden;">
                                                                            
                                                                            <div *ngFor="let elem of lstAscenso; let i = index; let last = last" class="timeline-block d-flex position-relative pb-4">
                                                                                
                                                                                <div class="timeline-axis d-flex flex-column align-items-center mr-3" style="min-width: 24px;">
                                                                                    <!-- Dot -->
                                                                                    <div class="timeline-dot shadow-sm" 
                                                                                         [ngStyle]="{'background-color': i === 0 ? '#5eaaa8' : '#fff', 'border': i === 0 ? 'none' : '2px solid #e9ecef'}"
                                                                                         style="width: 14px; height: 14px; border-radius: 50%; z-index: 2; margin-top: 6px;">
                                                                                    </div>
                                                                                    <!-- Line -->
                                                                                    <div *ngIf="!last" class="timeline-line" 
                                                                                         style="width: 2px; flex-grow: 1; background: linear-gradient(to bottom, #e9ecef 0%, #f8f9fe 100%); margin-top: 4px; margin-bottom: -10px;">
                                                                                    </div>
                                                                                </div>

                                                                                <div class="timeline-content w-100">
                                                                                    <div class="row align-items-center">
                                                                                        <div class="col-md-3 mb-1 mb-md-0">
                                                                                            <div class="d-flex flex-column">
                                                                                            <span class="text-muted text-xs font-weight-bold mb-1">
                                                                                                <i class="ni ni-calendar-grid-58 mr-1"></i> {{ convertirFecha(elem.fecha_resolucion) || '---' }}
                                                                                            </span>
                                                                                                <span class="text-dark text-xs font-weight-bold">
                                                                                                    <i class="fa fa-hashtag mr-1 text-muted"></i> {{ elem.numero || 'S/N' }}
                                                                                                </span>
                                                                                            </div>
                                                                                        </div>

                                                                                        <div class="col-md-4 mb-1 mb-md-0">
                                                                                            <span class="d-block text-dark font-weight-bold text-sm text-uppercase" style="line-height: 1.2;">
                                                                                                {{ obtenerNombreGrado(elem.grado) || 'NO APLICA' }}
                                                                                            </span>
                                                                                        </div>

                                                                                        <div class="col-md-2 text-center mb-1 mb-md-0">
                                                                                            <div class="d-inline-block">
                                                                                                <small class="text-muted d-block text-uppercase" style="font-size: 0.65rem;">Orden</small>
                                                                                                <span class="font-weight-bold text-dark" style="font-size: 0.9rem;">{{ obtenerOrdenMerito(elem) || '-' }}</span>
                                                                                            </div>
                                                                                        </div>

                                                                                        <div class="col-md-3 text-right">
                                                                                            <button *ngIf="!validarSeguridad(elem)" 
                                                                                                    class="btn btn-sm btn-pastel text-white shadow-sm" 
                                                                                                    (click)="dwUrl(elem)" 
                                                                                                    style="border-radius: 20px; padding: 0.4rem 1rem;">
                                                                                                <i class="fa fa-download mr-1"></i> Ver
                                                                                        </button>
                                                                                        
                                                                                            <span *ngIf="validarSeguridad(elem)" 
                                                                                                  class="badge badge-pill badge-warning text-white" style="padding: 0.5em 1em;">
                                                                                                <i class="fa fa-lock mr-1"></i> Restringido
                                                                                            </span>
                                                                                        </div>
                                                                                    </div>
                                                                                    
                                                                                    <div *ngIf="!last" class="mt-3 border-bottom" style="border-color: rgba(0,0,0,0.05) !important;"></div>
                                                                                </div>
                                                                            </div>

                                                                            <div *ngIf="lstAscenso.length === 0" class="text-center py-5">
                                                                                <p class="text-muted mt-2 text-sm">No hay registros de ascensos disponibles.</p>
                                                                            </div>
                                                                        </div>
                                            
                                                            </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row" *ngIf="dbDatosNombre">
                                            <div class="col-md-12">

                                                <table class="sandratbl">
                                                    <thead>
                                                        <tr>
                                                            <th colspan="10" class="text-center" style="padding: 15px;">
                                                                LISTADO GENERAL POR PERSONA </th>
                                                        </tr>
                                                        <tr>
                                                            <th> NUM.</th>
                                                            <th> GRADO</th>
                                                            <th *ngIf="mostrarComponenteColumna" > COMPONENTE </th>
                                                            <th> NOMBRE COMPLETO</th>
                                                            <th style="width: 110px;"> CEDULA</th>
                                                            <th style="width: 90px;"> PROMOCION</th>
                                                            <th> SEXO </th>
                                                            <th> CATEGORIA </th>
                                                            <th> CLASIFICACION </th>
                                                            <th>SITUACION</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let e of lstNombres; index as i">
                                                            <td>{{ i+1 }}</td>
                                                            <td>{{ e.grado_abreviado }}</td>
                                                            <td *ngIf="mostrarComponenteColumna" >{{ e.componente_abreviado }}</td>
                                                            <td>{{ e.nombres | uppercase }}</td>
                                                            <td><a class="enlace"
                                                                    (click)="MoverForm(e.cedula);volverDatos(0)"
                                                                    style="font-weight: bold; color: brown;">
                                                                    {{e.cedula}} </a>
                                                            </td>
                                                            <td>
                                                                {{ convertirFecha(e.promocion) }}
                                                            </td>
                                                            <td>
                                                                {{ e.sexo | uppercase }}
                                                            </td>
                                                            
                                                            <td>{{ e.nombre_categoria }}</td>
                                                            <td>{{ e.des_clasificacion }}</td>
                                                            <td>
                                                                {{ getSituation(e.situacion) | uppercase }}
                                                            </td>

                                                        </tr>
                                                    </tbody>

                                                </table>
                                                <div class="row mt-3">
                                                <div class="col-md-12 text-right">
                                                    <button class="btn btn-pastel text-white" (click)="downloadCSVEspecifica()">
                                                        <span class="fa fa-download"></span>&nbsp;&nbsp;Descargar consulta
                                                    </button>
                                                </div>
                                            </div>
                                            </div>
                                        </div>

                                        <br>
                                        <div class="row" *ngIf="dbDatos">

                                            <div class="col-md-12">
                                                <h2 class="title-elegant">Entradas</h2>
                                                <table class="sandratbl">
                                                    <thead style="height: 40px;">

                                                        <tr>
                                                            <th style="width: 90px;"> FECHA</th>
                                                            <th>CUENTA</th>
                                                            <th>ESTATUS</th>
                                                            <th>ASUNTO</th>
                                                            <th>VER</th>
                                                            <th>EDITAR</th>
                                                            <th *ngIf="bEliminarEntrada">ELIM.</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let e of lstEntradas">
                                                            <td>{{ convertirFecha(e.fecha_entrada)}}</td>
                                                            <td>
                                                                <a *ngIf="e.cuenta_oficio!=''" class="enlace"
                                                                    (click)="dwUrlEntrada(e)" target="_blank"
                                                                    style="font-weight: bold; color: brown;">
                                                                    {{ e.cuenta_oficio }} </a>
                                                                <a *ngIf="e.cuenta_oficio==''" class="enlace"
                                                                    (click)="dwUrlEntrada(e)" target="_blank"
                                                                    style="font-weight: bold; color: brown;">
                                                                    VER DOC. </a>


                                                            </td>
                                                            <td>{{ e.estatus_descripcion }}</td>
                                                            <td [innerHTML]="e.asunto | uppercase"></td>
                                                            <td style="text-align: center;">
                                                                <button mat-icon-button aria-label="Editar"
                                                                    (click)="detalleEntrada( frmEntrada, e )">
                                                                    <mat-icon>notes</mat-icon>
                                                                </button>
                                                            </td>
                                                            <td style="text-align: center;">
                                                                <button mat-icon-button aria-label="Editar"
                                                                    (click)="detalleEntradaEditar( e )">
                                                                    <mat-icon>edit_note</mat-icon>
                                                                </button>
                                                            </td>
                                                            <td *ngIf="bEliminarEntrada" style="text-align: center;">
                                                                <button mat-icon-button aria-label="Editar"
                                                                    (click)="eliminarEntrada( e )">
                                                                    <mat-icon>delete</mat-icon>
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    </tbody>

                                                </table>
                                            </div>

                                        </div>

                                        <br>
                                        <div class="row" *ngIf="dbDatos">
                                            <div class="col-md-12">
                                                <h2 class="title-elegant">Resoluciones</h2>
                                                <table class="sandratbl">
                                                    <thead style="height: 40px;">
                                                        <tr>
                                                            <th>#</th>
                                                            <th style="width: 90px;"> FECHA</th>
                                                            <th>NUMERO</th>
                                                            <th>TIPO</th>
                                                            <th colspan="2">ASUNTO</th>
                                                            <th>DISTRI.</th>
                                                            <th>ACCION</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let e of lstResoluciones; index as i">
                                                            <td valign="center"><b>{{ i + 1 }}</b></td>
                                                            <td>{{ convertirFecha(e.fecha) }}</td>
                                                            <td>
                                                                <a *ngIf="!validarSeguridad(e)" class="enlace"
                                                                    (click)="dwUrl(e)" target="_blank"
                                                                    style="font-weight: bold; color: brown;">
                                                                    {{e.titulo}} 
                                                                </a> 
                                                                <b *ngIf="validarSeguridad(e)" class="enlace"
                                                                    href="#" style="font-weight: bold; color: brown;">
                                                                    {{e.titulo}} 
                                                                </b> 

                                                            </td>
                                                            <td>
                                                               
                                                                {{ obtenerTipo(e.tipo) }}
                                                               
                                                            </td>
                                                            <td colspan="2" *ngIf="validarSeguridad(e)" style="color:brown;">
                                                                DEBE CONSULTAR CON EL DEPARTAMENTO DE RESOLUCIONES
                                                            </td>
                                                            <td *ngIf="e.cod_pais!=66 && !validarSeguridad(e)" colspan="2" 
                                                                [innerHTML]="e.asunto | uppercase">
                                                            </td> 
                                                            <td *ngIf="e.cod_pais==66 && !validarSeguridad(e)" style="width: 20px; text-align: center;">
                                                                <button #tooltip="matTooltip"
                                                                matTooltip="{{ e.observacion | uppercase}}"
                                                                    mat-icon-button aria-label="Detalle" (click)="editar( e )">
                                                                    <mat-icon class="text-red">add_alert</mat-icon>
                                                                </button>
                                                            </td> 
                                                            <td *ngIf="e.cod_pais==66 && !validarSeguridad(e)" 
                                                                [innerHTML]="e.asunto | uppercase">

                                                            </td>
                                                            <td>
                                                                <button mat-icon-button aria-label="Detalle"
                                                                    (click)="detalle( detalles, e)">
                                                                    <mat-icon>{{
                                                                        getIcon( e ) }}</mat-icon>
                                                                </button>
                                                            </td>
                                                            <td style="text-align: center;">
                                                                <button  *ngIf="!validarSeguridad(e)" mat-icon-button aria-label="Editar"
                                                                    (click)="editar( e )">
                                                                    <mat-icon>edit_note</mat-icon>
                                                                </button>
                                                                <button  *ngIf="validarSeguridad(e)" mat-icon-button aria-label="Editar">
                                                                    <mat-icon>info</mat-icon>
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    </tbody>

                                                </table>
                                            </div>

                                        </div>

                                        <div class="row" *ngIf="dbResolucion">

                                            <div class="col-md-12">
                                                <table class="sandratbl">
                                                    <thead style="height: 40px;">
                                                        <tr>
                                                            <th [attr.colspan]="hayCorreccion() ? 9 : 8" class="text-center" style="padding: 15px;">
                                                                FICHA DE DATOS RESOLUCIONES ( {{ resolucion }} ) </th>
                                                        </tr>
                                                        <tr>
                                                            <th> NUM.</th>
                                                            <th> GRADO</th>
                                                            <th> COMPONENTE</th>
                                                            <th> NOMBRE COMPLETO</th>
                                                            <th style="width: 110px;"> CEDULA</th>
                                                            <th style="width: 90px;"> FECHA</th>
                                                            <th>TIPO</th>
                                                            <th>ASUNTO</th>
                                                            <th *ngIf="hayCorreccion()">CORRECCION</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let e of lstResolucionesS; index as i">
                                                            <td>{{ i+1 }}</td>
                                                            <td>{{ e.grado_abreviado }}</td>
                                                            <td>{{ e.componente_abreviado }}</td>
                                                            <td>{{ e.nombres_apellidos | uppercase }}</td>
                                                            <td><a class="enlace"
                                                                    (click)="obtenerCedula(e.cedula);volverDatos(1)"
                                                                    style="font-weight: bold; color: brown;">
                                                                    {{e.cedula}} </a></td>

                                                            <td>{{ convertirFecha(e.fecha_resolucion) }}</td>
                                                            <!-- href="{{ obtenerUbicacion(e) }}" -->
                                                            <td><a *ngIf="!validarSeguridad(e)" class="enlace"
                                                                    (click)="dwUrl(e)" target="_blank"
                                                                    style="font-weight: bold; color: brown;"> {{
                                                                    obtenerTipo(e.tipo) }} </a> </td>
                                                            <td *ngIf="validarSeguridad(e)" style="color:brown;">

                                                                <b>DEBE CONSULTAR CON EL DEPARTAMENTO DE
                                                                    RESOLUCIONES</b>
                                                            </td>
                                                            <td *ngIf="!validarSeguridad(e)"
                                                                [innerHTML]="asuntohtml(e)">

                                                            </td>
                                                            <td *ngIf="hayCorreccion() && getCorreccion(e)">
                                                                <a *ngIf="!validarSeguridad(e)" class="enlace"
                                                                    (click)="dwUrlCorreccion(e)" target="_blank"
                                                                    style="font-weight: bold; color: brown;"> {{
                                                                    getCorreccion(e) }} </a>
                                                            </td>
                                                        </tr>
                                                    </tbody>

                                                </table>
                                            </div>

                                        </div>


                                    </div>
                                </mat-tab>
                                <mat-tab *ngIf="bFiltrada">
                                    <ng-template mat-tab-label>
                                        &nbsp;FILTRADA
                                    </ng-template>
                                    <br>
                                    <div class="example-large-box " style="margin: 0px;padding: 15px;">
                                        <div *ngIf="blFiltro">

                                            <div class="form-row">
                                                <div class="form-group col-md-6">
                                                    <label class="form-label-custom">Tipo de Resolución</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend"><span class="input-group-text icon-box">
                                                            <mat-icon class="input-icon">category</mat-icon></span></div>
                                                        <input type="text" class="input-custom" [formControl]="myControl"
                                                            (blur)="seleccionTipo()" [matAutocomplete]="auto"
                                                            [(ngModel)]="tipo">
                                                        <mat-autocomplete #auto="matAutocomplete"
                                                            [displayWith]="displayFn" style="width:100%">
                                                            <mat-option *ngFor="let option of filteredOptions | async"
                                                                [value]="option">
                                                                {{option.nombre}}
                                                            </mat-option>
                                                        </mat-autocomplete>
                                                     
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-6">
                                                    <label class="form-label-custom">Causa</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text icon-box"><mat-icon class="input-icon">list</mat-icon></span>
                                                        </div>
                                                        <select class="input-custom"
                                                                [ngModelOptions]="{standalone: true}" [(ngModel)]="causa"
                                                                (change)="getMotivo()">
                                                                <option value="%">TODOS</option>
                                                                <option *ngFor="let e of lstCausa" value="{{e.codigo}}">{{e.nombre}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-row">
                                                <div class="form-group col-md-4">
                                                    <label class="form-label-custom">Categoria</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text icon-box"><mat-icon class="input-icon">class</mat-icon></span>
                                                        </div>
                                                        <select class="input-custom"
                                                                [ngModelOptions]="{standalone: true}"
                                                                [(ngModel)]="categoria">
                                                                <option value="%">TODOS</option>
                                                                <option *ngFor="let e of Categorias;" [value]="e.cod_categoria">{{e.nombre_categoria}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group col-md-4">
                                                    <label class="form-label-custom">Componente</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text icon-box"><mat-icon class="input-icon">security</mat-icon></span>
                                                        </div>
                                                        <select class="input-custom"
                                                                [ngModelOptions]="{standalone: true}"
                                                                [(ngModel)]="componente">
                                                                <option value="%">TODOS</option>
                                                                <option *ngFor="let e of Componentes;" [value]="e.cod_componente">{{e.nombre_componente}}</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="form-group col-md-4">
                                                    <label class="form-label-custom">Grado</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text icon-box"><mat-icon class="input-icon">military_tech</mat-icon></span>
                                                        </div>
                                                        <select class="input-custom"
                                                                [ngModelOptions]="{standalone: true}" [(ngModel)]="grado">
                                                                <option value="%">TODOS</option>
                                                                <option *ngFor="let e of Grados" value="{{e.cod_grado}}">{{e.nombre_corto }} - {{e.nombres_grado }}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-row">
                                                <div class="form-group col-md-3">
                                                    <label class="form-label-custom">Desde</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text icon-box" (click)="dStart.toggle()" style="cursor: pointer;">
                                                                <mat-icon class="input-icon">event</mat-icon>
                                                            </span>
                                                        </div>
                                                        <input class="input-custom" placeholder="AAAA-MM-DD"
                                                            [formControl]="fechaRango.get('start')" ngbDatepicker #dStart="ngbDatepicker"
                                                            placement="bottom-left" readonly (click)="dStart.toggle()">
                                                    </div>
                                                </div>
                                                <div class="form-group col-md-3">
                                                    <label class="form-label-custom">Hasta</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text icon-box" (click)="dEnd.toggle()" style="cursor: pointer;">
                                                                <mat-icon class="input-icon">event</mat-icon>
                                                            </span>
                                                        </div>
                                                        <input class="input-custom" placeholder="AAAA-MM-DD"
                                                            [formControl]="fechaRango.get('end')" ngbDatepicker #dEnd="ngbDatepicker"
                                                            placement="bottom-left" readonly (click)="dEnd.toggle()">
                                                    </div>
                                                </div>
                                                <div class="form-group col-md-3">
                                                    <label class="form-label-custom">Tipo de Busqueda</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text icon-box"><mat-icon class="input-icon">filter_list</mat-icon></span>
                                                        </div>
                                                        <select class="input-custom"
                                                                [ngModelOptions]="{standalone: true}"
                                                                [(ngModel)]="busqueda">
                                                                <option value="0">DETALLADA</option>
                                                                <option value="1">AGRUPADA</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group col-md-3">
                                                    <label class="form-label-custom">Formato del Documento</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <span class="input-group-text icon-box"><mat-icon class="input-icon">description</mat-icon></span>
                                                        </div>
                                                        <select class="input-custom"
                                                                [ngModelOptions]="{standalone: true}" [(ngModel)]="tipodocumento">
                                                                <option value="0">RESOLUCION</option>
                                                                <option value="1">ORDEN GENERAL</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <textarea class="form-control" cols="30" rows="3"
                                                        [ngModelOptions]="{standalone: true}" [(ngModel)]="asunto"
                                                        placeholder="Introduzca el Asunto..."
                                                        style="width: 100%"></textarea>

                                                </div>
                                            </div>

                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <textarea class="form-control" cols="30" rows="3"
                                                        [ngModelOptions]="{standalone: true}"
                                                        [(ngModel)]="instrucciones"
                                                        placeholder="Instrucciones especiales..."
                                                        style="width: 100%"></textarea>

                                                </div>
                                            </div>

                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <textarea class="form-control" cols="30" rows="3"
                                                        [ngModelOptions]="{standalone: true}"
                                                        [(ngModel)]="observaciones"
                                                        placeholder="Introduzca la Observacion..." style="width: 100%">
                                                </textarea>


                                                </div>
                                            </div>

                                            <div class="row mt-3">
                                                <div class="col-md-12 text-right">
                                                    <button class="btn btn-pastel-cancel text-white mr-2" (click)="FilConsultar(1)">
                                                        <span class="fa fa-list-ul mr-2"></span> Listar sin fecha
                                                    </button>
                                                    <button class="btn btn-pastel text-white" (click)="FilConsultar(0)">
                                                        <span class="fa fa-search mr-2"></span> Consultar datos
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <hr *ngIf="blFiltro">
                                        <div *ngIf="!blFiltro">
                                            <div class="row">

                                                <div class="col-md-12 text-right">

                                                    <button class="btn btn-pastel text-white "
                                                        (click)="MostrarFiltro();">
                                                        <span class="fa fa-upload"></span>&nbsp;&nbsp;Mostrar formulario
                                                    </button>

                                                    <button class="btn btn-pastel-cancel text-white " (click)="downloadCSV();">
                                                        <span class="fa fa-download"></span>&nbsp;&nbsp;Descargar
                                                        consulta </button>
                                                    <br><br>

                                                </div>

                                            </div>
                                        </div>

                                        <div class="row" *ngIf="dbResolucionFil">

                                            <div class="col-md-12">
                                                <table class="sandratbl">
                                                    <thead style="height: 40px;">
                                                        <tr>
                                                            <th colspan="10" class="text-center" style="padding: 15px;">
                                                                FICHA DE DATOS RESOLUCIONES ( {{ resolucion }} ) </th>
                                                        </tr>
                                                        <tr>
                                                            <th> NUM.</th>
                                                            <th style="width: 80px;"> GRADO</th>
                                                            <th style="width: 80px;"> COMP.</th>
                                                            <th> NOMBRE COMPLETO</th>
                                                            <th> CEDULA</th>
                                                            <th> RESOLUCION</th>
                                                            <th style="width: 90px;"> FECHA</th>
                                                            <th>TIPO</th>
                                                            <!-- <th>DESCRIPCION</th> -->
                                                            <th>ASUNTO</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let e of lstResolucionesX; index as i">
                                                            <td>{{ i+1 }}</td>
                                                            <td>{{ e.grado_abreviado }}</td>
                                                            <td>{{ e.componente_abreviado }}</td>
                                                            <td>{{ e.nombres_apellidos | uppercase}}</td>

                                                            <td>
                                                                <a class="enlace"
                                                                    (click)="obtenerCedula(e.cedula);MoverForm(e.cedula)"
                                                                    style="font-weight: bold; color: brown;">
                                                                    {{e.cedula}} 
                                                                </a>
                                                            </td>
                                                            <td *ngIf="!validarSeguridad(e)">
                                                                <a  class="enlace"
                                                                    (click)="dwUrl(e)" target="_blank"
                                                                    style="font-weight: bold; color: brown;">
                                                                    {{ e.numero }} 
                                                                </a> 
                                                            </td>
                                                            <td *ngIf="validarSeguridad(e)" >
                                                                {{ e.numero }} 
                                                            </td>
                                                            <td>{{ convertirFecha(e.fecha_resolucion) }}</td>
                                                            <td>{{ obtenerTipo(e.tipo) }}</td>
                                                            
                                                            <td *ngIf="validarSeguridad(e)"  style="color:brown;">
                                                                <b>DEBE CONSULTAR CON EL DEPARTAMENTO DE
                                                                    RESOLUCIONES</b>
                                                            </td>
                                                            <td *ngIf="!validarSeguridad(e)" [innerHTML]="asuntohtml(e)"></td>
                                                        </tr>
                                                    </tbody>

                                                </table>
                                            </div>

                                        </div>


                                        <div class="row" *ngIf="dbResolucionTipo">
                                            <div class="col-md-12">
                                                <table class="sandratbl">
                                                    <thead  style="height: 40px;">
                                                        <tr>
                                                            <th colspan="7" class="text-center" style="padding: 15px;">
                                                                FICHA DE DATOS RESOLUCIONES ( {{ resolucion }} ) </th>
                                                        </tr>
                                                        <tr>
                                                            <th>NUM.</th>
                                                            <th>RESOLUCION</th>
                                                            <th style="width: 150px;">FECHA</th>
                                                            <th>TIPO</th>
                                                            <th>DESCRIPCION</th>
                                                            <th style="width: 80px;">CANT.</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let e of lstResolucionesTipo; index as i;">
                                                            <td>{{ i+1 }}</td>
                                                            <!-- href="{{ obtenerUbicacion(e) }}" -->
                                                            <td><a *ngIf="!validarSeguridad(e)" class="enlace"
                                                                    (click)="dwUrl(e)" target="_blank"
                                                                    style="font-weight: bold; color: brown;">
                                                                    {{e.numero}} </a> </td>
                                                            <td>{{ convertirFecha(e.fecha_resolucion) }}</td>
                                                            <td>{{ obtenerTipo(e.tipo) }}</td>
                                                            <td *ngIf="validarSeguridad(e)" style="color:brown;">

                                                                <b>DEBE CONSULTAR CON EL DEPARTAMENTO DE
                                                                    RESOLUCIONES</b>
                                                            </td>
                                                            <td *ngIf="!validarSeguridad(e)">{{ e.administracion }}</td>
                                                            <td style="text-align: center; font-weight: bold;">{{
                                                                e.cantidad }}</td>
                                                        </tr>
                                                    </tbody>
                                                    <tfoot style="height: 40px;">
                                                        <tr>
                                                            <td colspan="5"
                                                                style="text-align: right;font-weight: bold;">
                                                                TOTAL&nbsp;&nbsp;&nbsp;
                                                            </td>
                                                            <td style="text-align: center; font-weight: bold;">
                                                                {{ total }}
                                                            </td>
                                                        </tr>
                                                    </tfoot>

                                                </table>
                                            </div>

                                        </div>
                                    </div>

                                </mat-tab>
                                <mat-tab *ngIf="bExpandida">
                                    <ng-template mat-tab-label>
                                        &nbsp;EXPANDIDA
                                    </ng-template>
                                    <br>
                                    <div class="example-large-box " style="margin: 0px;padding: 15px;">
                                        <div class="row" *ngIf="blExpandida">
                                            <div class="form-group col-md-12">

                                                <textarea [placeholder]="'Consultar rango de cedula'"
                                                    class="form-control" cols="30" rows="5"
                                                    [ngModelOptions]="{standalone: true}"
                                                    [(ngModel)]="rango_cedula"></textarea>
                                            </div>
                                            <div class="form-group col-md-12 text-right">
                                                <button class="btn btn-pastel text-white "
                                                    (click)="ConsultaExpandida();">
                                                    <span class="fa fa-search"></span>&nbsp;&nbsp;Consultar listado
                                                </button>
                                            </div>


                                        </div>
                                        <div class="row" *ngIf="!blExpandida">

                                            <div class="col-md-12 text-right">

                                                <button class="btn btn-pastel text-white " (click)="MostrarFiltroEx();">
                                                    <span class="fa fa-upload"></span>&nbsp;&nbsp;Mostrar formulario
                                                </button>

                                                <button class="btn btn-pastel text-white " (click)="downloadCSVEx();">
                                                    <span class="fa fa-download"></span>&nbsp;&nbsp;Descargar consulta
                                                </button>
                                                <br>

                                            </div>

                                        </div>
                                        <hr>

                                        <div class="row" *ngIf="!blExpandida">
                                            <div class="col-md-12">

                                                <table class="sandratbl">
                                                    <thead style="height: 40px;">
                                                        <tr style="text-align: justify;">
                                                            <th colspan="6">LISTADO GENERAL POR PERSONA </th>
                                                        </tr>
                                                        <tr>
                                                            <th>NUM.</th>
                                                            <th>GRADO</th>
                                                            <th>NOMBRE COMPLETO</th>
                                                            <th>CEDULA</th>
                                                            <th>FECHA</th>
                                                            <th>SITUACION</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let e of lstRangoCedula; index as i">
                                                            <td>{{ i+1 }}</td>
                                                            <td>{{ e.grado_abreviado }}</td>
                                                            <td>{{ e.nombres | uppercase }}</td>
                                                            <td><a class="enlace" (click)="MoverForm(e.cedula)"
                                                                    style="font-weight: bold; color: brown;">
                                                                    {{e.cedula}} </a>
                                                            </td>
                                                            <td>{{ convertirFecha(e.nacimiento) }}</td>
                                                            <td>{{e.situacion}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>

                                            </div>
                                        </div>

                                    </div>
                                </mat-tab>

                                <mat-tab *ngIf="bArchivo">
                                    <ng-template mat-tab-label>
                                        &nbsp;BUSCAR POR ARCHIVO
                                    </ng-template>
                                    <br>
                                    <br>
                                    <ngx-ui-loader [loaderId]="'loader-aceptar'"></ngx-ui-loader>
                                    <div class="example-large-box " style="margin: 0px;padding: 15px;">

                                        <!-- Instructions Section -->
                                        <div class="alert alert-secondary shadow-sm border-0 mb-4" role="alert">
                                            <div class="row align-items-center">
                                                <div class="col-md-1 text-center">
                                                    <div class="icon icon-shape btn-pastel text-white rounded-circle shadow">
                                                        <i class="ni ni-cloud-upload-96 "></i>
                                                    </div>
                                                </div>
                                                <div class="col-md-11">
                                                    <h4 class="alert-heading font-weight-bold text-default mb-1">Instrucciones para Carga Masiva</h4>
                                                    <p class="mb-2 text-muted text-sm">
                                                        Para procesar múltiples consultas, cargue un archivo con extensión <strong>.csv</strong> (valores separados por punto y coma). Asegúrese de cumplir con el siguiente formato:
                                                    </p>
                                                    <div class="row text-sm text-muted">
                                                        <div class="col-md-6">
                                                            <ul class="list-unstyled mb-0">
                                                                <li class="mb-1"><i class="fa fa-check-circle mr-2"></i>Codificación del archivo: <strong>UTF-8</strong>.</li>
                                                                <li class="mb-1"><i class="fa fa-check-circle mr-2"></i>Sin cabeceras ni títulos.</li>
                                                                <li class="mb-1"><i class="fa fa-check-circle mr-2"></i>Columna 1: <strong>Cédula de Identidad</strong>.</li>
                                                            </ul>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <ul class="list-unstyled mb-0">
                                                                <li class="mb-1"><i class="fa fa-check-circle mr-2"></i>Columna 2: <strong>Orden de impresión</strong> (Opcional).</li>
                                                                <li class="mb-1"><i class="fa fa-check-circle mr-2"></i>Delimitador de descarga: <strong>|</strong> (por defecto).</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Form Controls -->
                                        <div class="form-row align-items-end">
                                            <div class="form-group col-md-2">
                                                <label class="form-label-custom">Delimitador</label>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text icon-box">
                                                            <mat-icon class="input-icon">space_bar</mat-icon>
                                                        </span>
                                                    </div>
                                                    <input type="text" class="input-custom" placeholder="|"
                                                        [ngModelOptions]="{standalone: true}" [(ngModel)]="delimitador">
                                                </div>
                                            </div>
                                            
                                            <div class="form-group col-md-4">
                                                <label class="form-label-custom">Tipo de Nómina</label>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text icon-box">
                                                            <mat-icon class="input-icon">groups</mat-icon>
                                                        </span>
                                                    </div>
                                                    <select class="input-custom" [ngModelOptions]="{standalone: true}" [(ngModel)]="tiponomina">
                                                        <option value="0">NOMINA INTERNA</option>
                                                        <option value="1">NOMINA SAIME</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-md-6">
                                                <form method="post" enctype="multipart/form-data" id="forma" name="forma">
                                                    <input type="hidden" name="identificador" value="{{idTransaccion}}">
                                                    <input type="hidden" name="return" value="true">
                                                    
                                                    <div class="form-row align-items-end">
                                                        <div class="form-group col-md-8">
                                                            <label class="form-label-custom">Seleccionar Archivo</label>
                                                            <div class="input-group">
                                                                <div class="custom-file">
                                                                    <input type="file" class="custom-file-input" name="archivos"  id="archivos" (change)="fileSelected($event)" accept=".csv" lang="es">
                                                                    <label class="custom-file-label" for="archivos" style="border-top-left-radius: 0.375rem; border-bottom-left-radius: 0.375rem;">
                                                                        {{ archivos && archivos.length > 0 ? archivos[archivos.length - 1].name : 'Seleccionar archivo .csv' }}
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <div class="form-group col-md-4">
                                                            <button class="btn btn-pastel text-white w-100" *ngIf="blExpandidaFile" (click)="SubirArchivo($event)">
                                                                <span class="d-flex align-items-center justify-content-center">
                                                                    <span class="fa fa-upload" style="font-size: 18px;"></span>&nbsp;&nbsp;Procesar
                                                                </span>
                                                            </button>
                                                            
                                                            <div class="btn-group w-100 shadow-sm d-flex" *ngIf="!blExpandidaFile" role="group">
                                                                <button type="button" class="btn btn-pastel text-white w-100" (click)="downloadCSVExFile()" title="Descargar Resultados">
                                                                    <span class="fa fa-download" style="font-size: 18px;"></span>
                                                                </button>
                                                                <button type="button" class="btn btn-pastel-cancel text-white w-100" (click)="ReveserConsutla()" title="Limpiar Consulta">
                                                                    <span class="fa fa-times" style="font-size: 18px;"></span>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                        
                                        <hr class="my-3" *ngIf="!blExpandidaFile">

                                        <div class="row" *ngIf="!blExpandidaFile">
                                            <div class="col-md-12">
                                                <h2 class="title-elegant mb-3">Resultados de la Carga</h2>
                                                <table class="sandratbl">
                                                    <thead style="width: 40px;">
                                                        <tr>
                                                            <th class="text-center" style="width: 60px;">N°</th>
                                                            <th>GRADO</th>
                                                            <th>NOMBRE COMPLETO</th>
                                                            <th style="width: 120px;">CÉDULA</th>
                                                            <th style="width: 100px;">FECHA</th>
                                                            <th>SITUACION</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr *ngFor="let e of lstRangoCedulaFile; index as i">
                                                            <td class="text-center font-weight-bold">{{ i+1 }}</td>
                                                            <td>{{ e.grado_abreviado }}</td>
                                                            <td>{{ e.nombres | uppercase }}</td>
                                                            <td class="text-center">
                                                                <a class="enlace font-weight-bold text-primary" (click)="MoverForm(e.cedula)" style="cursor: pointer;">
                                                                    {{e.cedula}}
                                                                </a>
                                                            </td>
                                                            <td class="text-center">
                                                                {{ convertirFecha(e.nacimiento) }}
                                                            </td>
                                                            <td class="text-center">
                                                                <span class="badge badge-pill" 
                                                                    [ngClass]="{'badge-success': e.situacion == 'ACT', 'badge-warning': e.situacion != 'ACT'}">
                                                                    {{ getSituation(e.situacion) }}
                                                                </span>
                                                            </td>

                                                        </tr>
                                                    </tbody>

                                                </table>
                                            </div>
                                        </div>

                                    </div>
                                </mat-tab>
                            </mat-tab-group>


                        </div>


                    </div>

                    <div class="row" *ngIf="opttodos=='1'">
                        <div class="col-md-12">
                            <app-rsconsultaentradas></app-rsconsultaentradas>
                        </div>
                    </div>

                    <br><br>
                    <br>
                </div>
            </div>
        </div>

    </div>
    <!-- Fin de Tarjeta Padre -->
</div>





<!-- Adjuntar Imagenes al Documento -->
<ng-template #detalles let-c="close" let-d="dismiss">
    <div class="modal-header bg-pastel-gradient">
        <h4 class="modal-title" id="modal-basic-title">Detalles generales</h4>
    </div>
    <div class="modal-body">
        <div class="form-row">
            <div class="form-group col-md-12">
                <label class="form-label-custom">Instrucciones especiales</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text icon-box">
                            <mat-icon class="input-icon">assignment</mat-icon>
                        </span>
                    </div>
                    <textarea class="input-custom" cols="30" rows="4" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="instrucciones" placeholder="Instrucciones..."></textarea>
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-12">
                <label class="form-label-custom">Observaciones</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text icon-box">
                            <mat-icon class="input-icon">comment</mat-icon>
                        </span>
                    </div>
                    <textarea class="input-custom" cols="30" rows="4" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="observacion" placeholder="Observaciones..."></textarea>
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-6">
                <label class="form-label-custom">Creador Por</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text icon-box"><mat-icon class="input-icon">person</mat-icon></span>
                    </div>
                    <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="autor_creador" readonly>
                </div>
            </div>
            <div class="form-group col-md-6">
                <label class="form-label-custom">Fecha Creación</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text icon-box"><mat-icon class="input-icon">event</mat-icon></span>
                    </div>
                    <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="fecha_registro" readonly>
                </div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group col-md-12">
                <label class="form-label-custom">Destino</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text icon-box">
                            <mat-icon class="input-icon">place</mat-icon>
                        </span>
                    </div>
                    <textarea class="input-custom" cols="30" rows="4" [ngModelOptions]="{standalone: true}"
                        [(ngModel)]="destino" placeholder="Destino..."></textarea>
                </div>
            </div>
        </div>


    </div>
    <div class="modal-footer">
        <button class="btn btn-pastel text-white " (click)="c('Save')">
            <span class="fa fa-check"></span>&nbsp;&nbsp;Aceptar </button>

    </div>
</ng-template>

<!-- Modal Foto -->
<ng-template #fotoModal let-c="close" let-d="dismiss">
    <div class="modal-body p-0 bg-transparent text-center" style="overflow: hidden; position: relative;">
        <button type="button" class="close text-white position-absolute" style="right: 20px; top: 20px; z-index: 10; opacity: 1; text-shadow: 0 0 5px black;" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true" style="font-size: 2rem;">&times;</span>
        </button>
        <img [src]="obtenerFoto(IDatosBasicos.cedula)" class="img-fluid rounded shadow-lg" style="max-height: 85vh; border: 5px solid white;">
    </div>
</ng-template>




<!-- Adjuntar Imagenes al Documento -->
<ng-template #frmEntrada let-c="close" let-d="dismiss">
    
    <div class="modal-body">

        <mat-tab-group mat-stretch-tabs class="example-stretched-tabs">
            <mat-tab>
                <ng-template mat-tab-label>
                    &nbsp;VISTA GENERAL
                </ng-template>
                <div class="example-large-box " style="margin: 0px;padding: 15px;">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label class="form-label-custom">Cuenta u Oficio</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">tag</mat-icon></span>
                                </div>
                                <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="cuenta" readonly>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label class="form-label-custom">Digital</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">cloud_download</mat-icon></span>
                                </div>
                                <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="digital" readonly>
                                <input type="hidden" [ngModelOptions]="{standalone: true}" [(ngModel)]="nombrearchivo"
                                    readonly>
                                <div class="input-group-append">
                                    <button class="btn btn-pastel text-white" (click)="abrirModalDescarga(digital, nombrearchivo)" type="button">
                                        <mat-icon style="font-size: 18px;">download</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label class="form-label-custom">Documento</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">description</mat-icon></span>
                                </div>
                                <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="documento" readonly>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label class="form-label-custom">Tipo</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">category</mat-icon></span>
                                </div>
                                <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="tipo_entrada" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-5">
                            <label class="form-label-custom">Estatus</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">info</mat-icon></span>
                                </div>
                                <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="estatus_entrada" readonly>
                            </div>
                        </div>
                        <div class="form-group col-md-5">
                            <label class="form-label-custom">Carpeta</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">folder</mat-icon></span>
                                </div>
                                <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="carpeta_entrada" readonly>
                            </div>
                        </div>
                        <div class="form-group col-md-2">
                            <label class="form-label-custom">Número Carpeta</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">format_list_numbered</mat-icon></span>
                                </div>
                                <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="numero" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <label class="form-label-custom">Asunto</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">subject</mat-icon></span>
                                </div>
                                <textarea class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="asunto_entrada" readonly></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <label class="form-label-custom">Observacion</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">comment</mat-icon></span>
                                </div>
                                <textarea class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="observacion_entrada" readonly></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label class="form-label-custom">Responsable</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">person</mat-icon></span>
                                </div>
                                <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="responsable_entrada" readonly>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label class="form-label-custom">Fecha Creación</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">event</mat-icon></span>
                                </div>
                                <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="modificado_entrada" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label class="form-label-custom">Registrado Por</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">person_add</mat-icon></span>
                                </div>
                                <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="registrado_entrada" readonly>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label class="form-label-custom">Fecha Registro</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text icon-box"><mat-icon class="input-icon">event</mat-icon></span>
                                </div>
                                <input type="text" class="input-custom" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="modificado_entrada" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-tab>
            <mat-tab>
                <ng-template mat-tab-label>
                    &nbsp;HISTORICO DE VERSIONES
                </ng-template>
                <div class="example-large-box " style="margin: 0px;padding: 15px;">
                </div>
            </mat-tab>
        </mat-tab-group>

    </div>
    <div class="modal-footer">
        <button class="btn btn-pastel text-white " (click)="c('Save')">
            <span class="fa fa-check"></span>&nbsp;&nbsp;Aceptar </button>

    </div>
</ng-template>